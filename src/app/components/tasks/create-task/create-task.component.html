<mat-card>
    <mat-card-title>{{isEditMode ? 'Update Task' : 'Create Task'}}</mat-card-title>
    <form #taskForm="ngForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="fill" class="full-width">
            <mat-label>Title</mat-label>
            <input matInput name="title" [(ngModel)]="task.title" required />
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
            <mat-label>Description</mat-label>
            <textarea matInput name="description" [(ngModel)]="task.description" required></textarea>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
            <mat-label>Due Date</mat-label>
            <input matInput [matDatepicker]="picker" name="dueDate" [(ngModel)]="task.dueDate" required />
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
            <mat-label>Priority</mat-label>
            <mat-select name="priority" [(ngModel)]="task.priority" required>
                @for (item of utilService.priorityOptions; track $index) {
                <mat-option [value]="item.value">{{item.label}}</mat-option>
                }
            </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width">
            <mat-label>Status</mat-label>
            <mat-select name="status" [(ngModel)]="task.status" required>
                @for (item of utilService.taskStatusOptions; track $index) {
                <mat-option [value]="item.value">{{item.label}}</mat-option>
                }
            </mat-select>
        </mat-form-field>

        <div class="actions">
            <button mat-raised-button color="primary" type="submit" [disabled]="taskForm.invalid">{{isEditMode ?
                'Update' : 'Create'}}</button>
            <button mat-button type="button" (click)="onCancel()">Cancel</button>
        </div>
    </form>
</mat-card>